# integrate IOS with tokenim-app WEB

#. 0. 现状
- WEB已经实现了通过metamask访问以太坊区块链实现转账、签字和授权，基于钱包地址的消息传输、直接点对点音视频通讯的功能也可以借此实现；
- IOS客户端基本实现了SFU会议功能以及点对点音视频通讯功能；
- WEB端的身份（ID）是以太坊钱包地址，消息传输是Whisper协议；
- App的身份（ID)是Carrier ID；消息传输也是Carrier网络；
- Whisper协议没有在App里实现，Carrier也无对于Web的支持；
- WEB依赖POA私有化部署的以太坊兼容链以及少数Whisper节点；
#. 1. 目标
- WEB所需智能合约部署在以太坊的测试链rinkeby上，代码也切换至rinkeby上；
- 考虑同时对于BSC、以太坊主链和亦来云以太坊侧链的部署和访问；
- 在智能合约里记录用户好友关系、推荐关系、以及使用凭证等信息，为对于用户的积极行为实施奖励激励做准备；
- 在智能合约里开发会议室功能，用户可以mint（铸造）房间，记录房间的角色、主题等信息；
- 集成Licode的语音和视频会议功能，包括显示房间列表和进入会议室开会
- Web端与App可以在同一个会议室开会
- Web端与IOS客户端绑定，IOS客户端可以备份carrier好友列表到对应以太坊钱包地址的好友智能合约当中
#. 2. 合约
- 部署
- carrier好友列表的记录和查询
- 以太坊好友列表的记录和查询
- 会议室合约：名称、logo、介绍，类型（私有｜公开），主持人【】，发言人【】，听众【】
#. 3. SFU会议
- 保留现在的用whisper实现的公共聊天室
- 会议列表（显示在公共聊天室下面）
- 语音会议
- 视频会议
#. 4. 绑定
- Web上显示二维码
- 手机App扫描后绑定，提交本人的carrier id和address以及好友列表，Web返回以太坊地址和记录凭证号码
- Web提供接口给手机App上传手机上传更新好友列表
- IOS客户端直接集成Web3的js接口访问以太坊合约涉及到私钥的保管和使用，估计不太好做
- 考虑到没有服务器，App和Web客户端直接通过socket.io或者webrtc进行数据交换
- 用户同时打开登录电脑网页版和手机客户端才能进行数据的同步；
- App考虑与手机钱包通过Wallet Connect协议集成实现与Essiential,TP，mykey等钱包的绑定

